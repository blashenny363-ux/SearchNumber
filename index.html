<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поиск информации по номеру телефона</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: #f7fafc;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: rgba(45, 55, 72, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
        }
        
        .auth-container {
            display: block;
        }
        
        .main-container {
            display: none;
        }
        
        .title {
            text-align: center;
            margin-bottom: 25px;
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(90deg, #e2e8f0, #a0aec0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 25%;
            width: 50%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #a0aec0, transparent);
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 25px;
            color: #cbd5e0;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .input-group {
            margin-bottom: 25px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #e2e8f0;
            font-size: 14px;
        }
        
        input {
            width: 100%;
            padding: 14px 15px;
            background: rgba(26, 32, 44, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #f7fafc;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        input:focus {
            outline: none;
            border-color: #a0aec0;
            box-shadow: 0 0 15px rgba(160, 174, 192, 0.4);
            background: rgba(26, 32, 44, 0.9);
        }
        
        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #4a5568, #2d3748);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            background: linear-gradient(135deg, #2d3748, #1a202c);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            transform: translateY(-3px);
        }
        
        button:active {
            transform: translateY(-1px);
        }
        
        .result {
            display: none;
            background: rgba(26, 32, 44, 0.8);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .result-label {
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .result-value {
            color: #cbd5e0;
            font-size: 16px;
        }
        
        .error {
            display: none;
            background: rgba(220, 53, 69, 0.25);
            border: 1px solid rgba(220, 53, 69, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
            color: #fc8181;
            animation: fadeIn 0.5s ease;
            font-weight: 500;
        }
        
        .success {
            display: none;
            background: rgba(72, 187, 120, 0.25);
            border: 1px solid rgba(72, 187, 120, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
            color: #9ae6b4;
            animation: fadeIn 0.5s ease;
            font-weight: 500;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
            color: #a0aec0;
        }
        
        .spinner {
            border: 3px solid rgba(160, 174, 192, 0.3);
            border-radius: 50%;
            border-top: 3px solid #a0aec0;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .links {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
            margin-bottom: 30px;
        }
        
        .link {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #a0aec0;
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 12px;
            border-radius: 8px;
            background: rgba(74, 85, 104, 0.5);
            font-weight: 500;
        }
        
        .link:hover {
            background: rgba(160, 174, 192, 0.3);
            color: #f7fafc;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #a0aec0;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .footer-credits {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 15px;
        }
        
        .footer-credits span {
            padding: 5px 15px;
            background: rgba(74, 85, 104, 0.5);
            border-radius: 20px;
            font-weight: 600;
        }
        
        .footer a {
            color: #a0aec0;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer a:hover {
            color: #e2e8f0;
        }
        
        .back-btn {
            background: rgba(74, 85, 104, 0.8) !important;
            margin-bottom: 15px;
        }
        
        .logout-btn {
            background: linear-gradient(135deg, #c53030, #9b2c2c) !important;
            margin-top: 30px;
            border: 1px solid rgba(245, 101, 101, 0.3);
        }
        
        .logout-btn:hover {
            background: linear-gradient(135deg, #9b2c2c, #742a2a) !important;
        }
        
        .toggle-link {
            text-align: center;
            margin-top: 15px;
            color: #a0aec0;
            font-size: 14px;
        }
        
        .toggle-link a {
            color: #a0aec0;
            text-decoration: none;
            font-weight: 600;
        }
        
        .toggle-link a:hover {
            color: #e2e8f0;
            text-decoration: underline;
        }
        
        .password-strength {
            height: 5px;
            margin-top: 8px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }
        
        .strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }
        
        .weak { background: #fc8181; width: 33%; }
        .medium { background: #f6ad55; width: 66%; }
        .strong { background: #68d391; width: 100%; }
        
        .password-hint {
            font-size: 12px;
            color: #a0aec0;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Контейнер для аутентификации -->
    <div class="container auth-container" id="authContainer">
        <h1 class="title" id="authTitle">Регистрация</h1>
        <p class="subtitle" id="authSubtitle">Создайте учетную запись для доступа</p>
        
        <div id="registerForm">
            <div class="input-group">
                <label for="emailInput">Email:</label>
                <input type="email" id="emailInput" placeholder="example@gmail.com" autocomplete="off">
            </div>
            
            <div class="input-group">
                <label for="passwordInput">Пароль:</label>
                <input type="password" id="passwordInput" placeholder="Придумайте пароль" autocomplete="new-password">
                <div class="password-strength">
                    <div class="strength-bar" id="strengthBar"></div>
                </div>
                <div class="password-hint" id="passwordHint">Пароль должен содержать минимум 8 символов</div>
            </div>
            
            <div class="input-group">
                <label for="confirmPasswordInput">Подтвердите пароль:</label>
                <input type="password" id="confirmPasswordInput" placeholder="Повторите пароль" autocomplete="new-password">
            </div>
            
            <button id="registerBtn">Зарегистрироваться</button>
            
            <div class="toggle-link">
                Уже есть аккаунт? <a href="#" id="showLoginLink">Войти</a>
            </div>
        </div>
        
        <div id="loginForm" style="display: none;">
            <div class="input-group">
                <label for="loginEmailInput">Email:</label>
                <input type="email" id="loginEmailInput" placeholder="example@gmail.com" autocomplete="off">
            </div>
            
            <div class="input-group">
                <label for="loginPasswordInput">Пароль:</label>
                <input type="password" id="loginPasswordInput" placeholder="Ваш пароль" autocomplete="current-password">
            </div>
            
            <button id="loginBtn">Войти</button>
            
            <div class="toggle-link">
                Нет аккаунта? <a href="#" id="showRegisterLink">Зарегистрироваться</a>
            </div>
        </div>
        
        <div class="success" id="successMessage">
            ✓ Регистрация успешна!
        </div>
        
        <div class="error" id="errorMessage">
            Ошибка: проверьте введенные данные
        </div>
    </div>
    
    <!-- Основной контейнер с функционалом поиска -->
    <div class="container main-container" id="mainContainer">
        <h1 class="title">Поиск информации по номеру телефона</h1>
        
        <div class="input-group">
            <label for="phoneInput">Введите номер телефона:</label>
            <input type="text" id="phoneInput" placeholder="79991234567" autocomplete="off">
        </div>
        
        <button id="searchBtn">Найти информацию</button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Поиск информации...</p>
        </div>
        
        <div class="error" id="searchError">
            Ошибка: номер недействительный или сервер недоступен
        </div>
        
        <div class="result" id="result">
            <!-- Результат будет добавлен с помощью JavaScript -->
        </div>
        
        <div class="footer">
            <div class="footer-credits">
                <span>ЯП - JavaScript</span>
                <span>CODE - @fuckserenityy</span>
            </div>
            <p>© 2024 Phone Information Service | Все права защищены</p>
            <p>Сервис предоставляет информацию только в ознакомительных целях</p>
        </div>
        
        <button class="logout-btn" id="logoutBtn">Выйти из системы</button>
    </div>

    <script>
        // Элементы DOM
        const authContainer = document.getElementById('authContainer');
        const mainContainer = document.getElementById('mainContainer');
        const authTitle = document.getElementById('authTitle');
        const authSubtitle = document.getElementById('authSubtitle');
        const registerForm = document.getElementById('registerForm');
        const loginForm = document.getElementById('loginForm');
        const showLoginLink = document.getElementById('showLoginLink');
        const showRegisterLink = document.getElementById('showRegisterLink');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const logoutBtn = document.getElementById('logoutBtn');
        const searchBtn = document.getElementById('searchBtn');
        const phoneInput = document.getElementById('phoneInput');
        
        // Элементы регистрации
        const emailInput = document.getElementById('emailInput');
        const passwordInput = document.getElementById('passwordInput');
        const confirmPasswordInput = document.getElementById('confirmPasswordInput');
        const registerBtn = document.getElementById('registerBtn');
        const strengthBar = document.getElementById('strengthBar');
        const passwordHint = document.getElementById('passwordHint');
        
        // Элементы входа
        const loginEmailInput = document.getElementById('loginEmailInput');
        const loginPasswordInput = document.getElementById('loginPasswordInput');
        const loginBtn = document.getElementById('loginBtn');
        
        // Проверка авторизации при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            const isAuthenticated = localStorage.getItem('phoneSearchAuthenticated');
            const savedUser = localStorage.getItem('phoneSearchUser');
            
            if (isAuthenticated === 'true' && savedUser) {
                showMainApp();
            } else {
                // Показываем форму регистрации по умолчанию
                showRegisterForm();
                emailInput.focus();
            }
        });
        
        // Показать форму регистрации
        function showRegisterForm() {
            registerForm.style.display = 'block';
            loginForm.style.display = 'none';
            authTitle.textContent = 'Регистрация';
            authSubtitle.textContent = 'Создайте учетную запись для доступа';
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
        }
        
        // Показать форму входа
        function showLoginForm() {
            registerForm.style.display = 'none';
            loginForm.style.display = 'block';
            authTitle.textContent = 'Вход в систему';
            authSubtitle.textContent = 'Введите данные для входа';
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            loginEmailInput.focus();
        }
        
        // Обработчики переключения между формами
        showLoginLink.addEventListener('click', function(e) {
            e.preventDefault();
            showLoginForm();
        });
        
        showRegisterLink.addEventListener('click', function(e) {
            e.preventDefault();
            showRegisterForm();
        });
        
        // Обработка ввода пароля (индикатор сложности)
        passwordInput.addEventListener('input', function() {
            const password = passwordInput.value;
            let strength = 0;
            let hint = '';
            
            // Проверка длины
            if (password.length >= 8) strength += 1;
            if (password.length >= 12) strength += 1;
            
            // Проверка на наличие цифр
            if (/\d/.test(password)) strength += 1;
            
            // Проверка на наличие букв в разном регистре
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 1;
            
            // Проверка на наличие специальных символов
            if (/[^a-zA-Z0-9]/.test(password)) strength += 1;
            
            // Определение уровня сложности
            strengthBar.className = 'strength-bar';
            if (password.length === 0) {
                strengthBar.style.width = '0%';
                hint = 'Пароль должен содержать минимум 8 символов';
            } else if (strength <= 2) {
                strengthBar.classList.add('weak');
                hint = 'Слабый пароль. Добавьте цифры и заглавные буквы';
            } else if (strength <= 4) {
                strengthBar.classList.add('medium');
                hint = 'Средний пароль. Добавьте специальные символы';
            } else {
                strengthBar.classList.add('strong');
                hint = 'Сильный пароль';
            }
            
            passwordHint.textContent = hint;
        });
        
        // Обработчик регистрации
        registerBtn.addEventListener('click', function() {
            const email = emailInput.value.trim();
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            
            // Сброс сообщений
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Валидация
            if (!isValidEmail(email)) {
                errorMessage.textContent = 'Пожалуйста, введите корректный email';
                errorMessage.style.display = 'block';
                return;
            }
            
            if (password.length < 8) {
                errorMessage.textContent = 'Пароль должен содержать минимум 8 символов';
                errorMessage.style.display = 'block';
                return;
            }
            
            if (password !== confirmPassword) {
                errorMessage.textContent = 'Пароли не совпадают';
                errorMessage.style.display = 'block';
                return;
            }
            
            // Сохранение пользователя (в реальном приложении здесь был бы запрос к серверу)
            const userData = {
                email: email,
                password: password, // В реальном приложении пароль должен хэшироваться!
                registeredAt: new Date().toISOString()
            };
            
            // Сохраняем в localStorage
            localStorage.setItem('phoneSearchUser', JSON.stringify(userData));
            localStorage.setItem('phoneSearchAuthenticated', 'true');
            
            // Показываем сообщение об успехе
            successMessage.textContent = '✓ Регистрация успешна!';
            successMessage.style.display = 'block';
            
            // Через секунду показываем основное приложение
            setTimeout(() => {
                showMainApp();
            }, 1000);
        });
        
        // Обработчик входа
        loginBtn.addEventListener('click', function() {
            const email = loginEmailInput.value.trim();
            const password = loginPasswordInput.value;
            
            // Сброс сообщений
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Валидация
            if (!email || !password) {
                errorMessage.textContent = 'Пожалуйста, заполните все поля';
                errorMessage.style.display = 'block';
                return;
            }
            
            // Получаем сохраненные данные пользователя
            const savedUserData = localStorage.getItem('phoneSearchUser');
            
            if (!savedUserData) {
                errorMessage.textContent = 'Пользователь не найден. Зарегистрируйтесь';
                errorMessage.style.display = 'block';
                return;
            }
            
            try {
                const userData = JSON.parse(savedUserData);
                
                // Проверяем email и пароль
                // Внимание: в реальном приложении пароли должны сравниваться в хэшированном виде!
                if (userData.email === email && userData.password === password) {
                    // Успешный вход
                    localStorage.setItem('phoneSearchAuthenticated', 'true');
                    showMainApp();
                } else {
                    errorMessage.textContent = 'Неверный email или пароль';
                    errorMessage.style.display = 'block';
                }
            } catch (e) {
                errorMessage.textContent = 'Ошибка при проверке данных';
                errorMessage.style.display = 'block';
                console.error(e);
            }
        });
        
        // Выход из системы
        logoutBtn.addEventListener('click', function() {
            localStorage.removeItem('phoneSearchAuthenticated');
            showRegisterForm();
            showAuthForm();
        });
        
        // Показать основное приложение
        function showMainApp() {
            authContainer.style.display = 'none';
            mainContainer.style.display = 'block';
            
            // Фокус на поле ввода телефона
            setTimeout(() => {
                phoneInput.focus();
            }, 300);
        }
        
        // Показать форму аутентификации
        function showAuthForm() {
            // Сброс всех полей
            emailInput.value = '';
            passwordInput.value = '';
            confirmPasswordInput.value = '';
            loginEmailInput.value = '';
            loginPasswordInput.value = '';
            
            // Сброс индикатора пароля
            strengthBar.className = 'strength-bar';
            strengthBar.style.width = '0%';
            passwordHint.textContent = 'Пароль должен содержать минимум 8 символов';
            
            // Сброс сообщений
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Показать форму аутентификации
            authContainer.style.display = 'block';
            mainContainer.style.display = 'none';
        }
        
        // Валидация email
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Функционал поиска по номеру телефона
        searchBtn.addEventListener('click', function() {
            const phone = phoneInput.value.trim().replace(/\D/g, '');
            
            if (!phone) {
                showSearchError('Пожалуйста, введите номер телефона');
                return;
            }
            
            if (phone.length < 10 || phone.length > 15) {
                showSearchError('Номер телефона должен содержать от 10 до 15 цифр');
                return;
            }
            
            // Показать индикатор загрузки
            document.getElementById('loading').style.display = 'block';
            document.getElementById('searchError').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            
            // URL для запроса
            const url = `https://htmlweb.ru/geo/api.php?json&telcod=${phone}`;
            
            // Выполняем запрос с использованием fetch API
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Ошибка сети');
                    }
                    return response.json();
                })
                .then(data => {
                    // Скрыть индикатор загрузки
                    document.getElementById('loading').style.display = 'none';
                    
                    // Проверяем, есть ли данные в ответе
                    if (data && !data.error) {
                        // Отобразить результат
                        displayResult(phone, data);
                    } else {
                        showSearchError('Информация по данному номеру не найдена');
                    }
                })
                .catch(error => {
                    // Скрыть индикатор загрузки и показать ошибку
                    document.getElementById('loading').style.display = 'none';
                    showSearchError('Ошибка: номер недействительный или сервер недоступен');
                    console.error('Ошибка:', error);
                });
        });
        
        function displayResult(phone, infoPhone) {
            const resultDiv = document.getElementById('result');
            
            // Создаем HTML для отображения результатов
            let resultHTML = '';
            
            resultHTML += `<div class="result-item">
                <div class="result-label">Номер телефона:</div>
                <div class="result-value">+${phone}</div>
            </div>`;
            
            resultHTML += `<div class="result-item">
                <div class="result-label">Страна:</div>
                <div class="result-value">${infoPhone.country?.name || 'Неизвестно'}</div>
            </div>`;
            
            resultHTML += `<div class="result-item">
                <div class="result-label">Регион/Город:</div>
                <div class="result-value">${infoPhone.region?.name || 'Неизвестно'}</div>
            </div>`;
            
            resultHTML += `<div class="result-item">
                <div class="result-label">Федеральный округ:</div>
                <div class="result-value">${infoPhone.region?.okrug || 'Неизвестно'}</div>
            </div>`;
            
            resultHTML += `<div class="result-item">
                <div class="result-label">Оператор связи:</div>
                <div class="result-value">${infoPhone[0]?.oper || 'Неизвестно'}</div>
            </div>`;
            
            resultHTML += `<div class="result-item">
                <div class="result-label">Часть света:</div>
                <div class="result-value">${infoPhone.country?.location || 'Неизвестно'}</div>
            </div>`;
            
            // Добавляем ссылки на мессенджеры
            resultHTML += `<div class="links">
                <a href="https://t.me/${phone}" target="_blank" class="link">Telegram</a>
                <a href="viber://chat?number=${phone}" target="_blank" class="link">Viber</a>
                <a href="https://wa.me/${phone}" target="_blank" class="link">WhatsApp</a>
            </div>`;
            
            resultDiv.innerHTML = resultHTML;
            resultDiv.style.display = 'block';
        }
        
        function showSearchError(message) {
            const errorDiv = document.getElementById('searchError');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }
        
        // Обработка нажатия Enter в поле ввода телефона
        phoneInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });
        
        // Обработка нажатия Enter в полях регистрации/входа
        emailInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                registerBtn.click();
            }
        });
        
        confirmPasswordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                registerBtn.click();
            }
        });
        
        loginEmailInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                loginBtn.click();
            }
        });
        
        loginPasswordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                loginBtn.click();
            }
        });
    </script>
</body>
</html>